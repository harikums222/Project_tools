---
import '../styles/global.css';

interface Props {
	title: string;
	description?: string;
}

const { title, description = "Free online finance and tax calculators for India." } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title} | FinTool India</title>
		<meta name="description" content={description} />
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
		<script src="https://cdn.jsdelivr.net/npm/chart.js" is:inline></script>
	</head>
	<body class="bg-gray-50 text-gray-900 font-sans min-h-screen flex flex-col">
		<header class="bg-white border-b border-gray-200 sticky top-0 z-50">
			<div class="container mx-auto px-4 h-16 flex items-center justify-between">
				<a href={import.meta.env.BASE_URL} class="flex items-center gap-2 group">
					<div class="w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold group-hover:bg-indigo-700 transition-colors">
						FT
					</div>
					<span class="text-xl font-bold tracking-tight">FinTool<span class="text-indigo-600">India</span></span>
				</a>
				<nav class="hidden md:flex items-center gap-6">
					<a href={`${import.meta.env.BASE_URL}/finance/sip-calculator/`} class="text-sm font-medium hover:text-indigo-600 transition-colors">SIP Calculator</a>
					<a href="#" class="text-sm font-medium hover:text-indigo-600 transition-colors">Income Tax</a>
					
					<!-- More Dropdown -->
					<div class="relative group h-full flex items-center">
						<button class="flex items-center gap-1 text-sm font-medium hover:text-indigo-600 transition-colors h-full">
							More 
							<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
							</svg>
						</button>
						<div class="absolute top-[100%] left-0 w-48 bg-white border border-gray-100 shadow-xl rounded-xl py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all transform origin-top translate-y-2 group-hover:translate-y-0 z-50">
							<a href={`${import.meta.env.BASE_URL}/finance/fd-calculator/`} class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">FD Calculator</a>
							<a href={`${import.meta.env.BASE_URL}/finance/gst-calculator/`} class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">GST Calculator</a>
							<a href={`${import.meta.env.BASE_URL}/finance/rd-calculator/`} class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">RD Calculator</a>
							<a href={`${import.meta.env.BASE_URL}/finance/ppf-calculator/`} class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">PPF Calculator</a>
							<a href={`${import.meta.env.BASE_URL}/finance/epf-calculator/`} class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">EPF Calculator</a>
							<a href={`${import.meta.env.BASE_URL}/finance/swp-calculator/`} class="block px-4 py-2 text-sm text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition-colors">SWP Calculator</a>
						</div>
					</div>
				</nav>

				<div class="flex items-center gap-4 flex-1 justify-end max-w-md ml-8">
					<!-- Search Box -->
					<div class="relative w-full hidden sm:block">
						<div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
							<svg class="h-4 w-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
							</svg>
						</div>
						<input 
							type="text" 
							id="tool-search" 
							placeholder="Search calculators..." 
							class="block w-full pl-10 pr-3 py-2 border border-gray-200 rounded-xl leading-5 bg-gray-50 placeholder-gray-400 focus:outline-none focus:bg-white focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm transition-all"
						/>
						<!-- Search Results Dropdown (Hidden initially) -->
						<div id="search-results" class="absolute top-full mt-2 w-full bg-white border border-gray-100 shadow-2xl rounded-xl py-2 hidden z-50">
						</div>
					</div>
					
					<button class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-indigo-700 transition-all shadow-sm whitespace-nowrap">
						Get Started
					</button>
				</div>
			</div>
		</header>

		<main class="flex-grow">
			<slot />
		</main>

		<footer class="bg-white border-t border-gray-200 py-12">
			<div class="container mx-auto px-4">
				<div class="grid grid-cols-1 md:grid-cols-4 gap-8">
					<div class="col-span-1 md:col-span-2">
						<a href={import.meta.env.BASE_URL} class="flex items-center gap-2 mb-4">
							<div class="w-6 h-6 bg-indigo-600 rounded flex items-center justify-center text-white font-bold text-xs">
								FT
							</div>
							<span class="text-lg font-bold tracking-tight">FinTool<span class="text-indigo-600">India</span></span>
						</a>
						<p class="text-gray-500 text-sm max-w-xs mb-4">
							Providing accurate and easy-to-use financial tools for the Indian market. Empowering your financial decisions.
						</p>
					</div>
					<div>
						<h3 class="font-bold text-sm mb-4 uppercase tracking-wider text-gray-400">Calculators</h3>
						<ul class="space-y-2">
							<li><a href={`${import.meta.env.BASE_URL}/finance/sip-calculator/`} class="text-gray-600 hover:text-indigo-600 text-sm">SIP Calculator</a></li>
							<li><a href={`${import.meta.env.BASE_URL}/finance/rd-calculator/`} class="text-gray-600 hover:text-indigo-600 text-sm">RD Calculator</a></li>
							<li><a href={`${import.meta.env.BASE_URL}/finance/fd-calculator/`} class="text-gray-600 hover:text-indigo-600 text-sm">FD Calculator</a></li>
							<li><a href={`${import.meta.env.BASE_URL}/finance/gst-calculator/`} class="text-gray-600 hover:text-indigo-600 text-sm">GST Calculator</a></li>
							<li><a href={`${import.meta.env.BASE_URL}/finance/swp-calculator/`} class="text-gray-600 hover:text-indigo-600 text-sm">SWP Calculator</a></li>
							<li><a href={`${import.meta.env.BASE_URL}/finance/ppf-calculator/`} class="text-gray-600 hover:text-indigo-600 text-sm">PPF Calculator</a></li>
							<li><a href={`${import.meta.env.BASE_URL}/finance/epf-calculator/`} class="text-gray-600 hover:text-indigo-600 text-sm">EPF Calculator</a></li>
						</ul>
					</div>
					<div>
						<h3 class="font-bold text-sm mb-4 uppercase tracking-wider text-gray-400">Legal</h3>
						<ul class="space-y-2">
							<li><a href="#" class="text-gray-600 hover:text-indigo-600 text-sm">Privacy Policy</a></li>
							<li><a href="#" class="text-gray-600 hover:text-indigo-600 text-sm">Terms of Service</a></li>
							<li><a href="#" class="text-gray-600 hover:text-indigo-600 text-sm">Contact Us</a></li>
						</ul>
					</div>
				</div>
				<div class="mt-12 pt-8 border-t border-gray-100 flex flex-col md:row items-center justify-between gap-4 text-xs text-gray-400 font-medium">
					<p>Â© 2026 FinTool India. All rights reserved.</p>
					<div class="flex gap-6">
						<a href="#" class="hover:text-indigo-600">Twitter</a>
						<a href="#" class="hover:text-indigo-600">LinkedIn</a>
						<a href="#" class="hover:text-indigo-600">GitHub</a>
					</div>
				</div>
			</div>
		</footer>
	</body>
	<script is:inline>
		// Search and Menu Functionality
		const tools = [
			{ name: 'SIP Calculator', url: '/finance/sip-calculator/', keywords: ['sip', 'mutual fund', 'investment', 'returns', 'monthly'] },
			{ name: 'Advanced SIP Calculator', url: '/finance/advanced-sip-calculator/', keywords: ['sip', 'stepup', 'inflation', 'tax', 'returns'] },
			{ name: 'FD Calculator', url: '/finance/fd-calculator/', keywords: ['fd', 'fixed deposit', 'interest', 'savings'] },
			{ name: 'GST Calculator', url: '/finance/gst-calculator/', keywords: ['gst', 'tax', 'invoice', 'business'] },
			{ name: 'RD Calculator', url: '/finance/rd-calculator/', keywords: ['rd', 'recurring deposit', 'recurring', 'savings'] },
			{ name: 'PPF Calculator', url: '/finance/ppf-calculator/', keywords: ['ppf', 'provident fund', 'savings', 'tax free', 'retirement'] },
			{ name: 'EPF Calculator', url: '/finance/epf-calculator/', keywords: ['epf', 'employee provident fund', 'retirement', 'salary', 'pension'] },
			{ name: 'SWP Calculator', url: '/finance/swp-calculator/', keywords: ['swp', 'systematic withdrawal', 'withdrawal', 'income'] },
		];

		const searchInput = document.getElementById('tool-search');
		const searchResults = document.getElementById('search-results');
		const baseUrl = document.querySelector('a[href^="/"]').getAttribute('href') === '/' ? '' : document.querySelector('a[href^="/"]').getAttribute('href').split('/')[1] ? '/' + document.querySelector('a[href^="/"]').getAttribute('href').split('/')[1] : '';
		
		// Helper to get correct base relative path
		const getBaseUrl = () => {
			// Try to get base from the meta tag if available, or fallback to current path detection
			const path = window.location.pathname;
			if (path.includes('/Project_tools')) return '/Project_tools';
			return '';
		};

		if (searchInput) {
			searchInput.addEventListener('input', (e) => {
				const query = e.target.value.toLowerCase();
				if (query.length < 1) {
					searchResults.classList.add('hidden');
					return;
				}

				const filtered = tools.filter(tool => 
					tool.name.toLowerCase().includes(query) || 
					tool.keywords.some(kw => kw.includes(query))
				);

				if (filtered.length > 0) {
					const finalBase = getBaseUrl();
					searchResults.innerHTML = filtered
						.map(tool => `<a href="${finalBase}${tool.url}" class="block px-4 py-3 text-sm text-gray-700 hover:bg-indigo-50 transition-colors border-b border-gray-50 last:border-0 font-medium">${tool.name}</a>`)
						.join('');
					searchResults.classList.remove('hidden');
				} else {
					searchResults.innerHTML = `<div class="px-4 py-3 text-sm text-gray-400 italic">No tools found</div>`;
					searchResults.classList.remove('hidden');
				}
			});

			// Close search dropdown on click outside
			document.addEventListener('click', (e) => {
				if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
					searchResults.classList.add('hidden');
				}
			});
		}
	</script>
</html>

<style is:global>
	:root {
		--font-sans: 'Inter', system-ui, -apple-system, sans-serif;
	}
	body {
		font-family: var(--font-sans);
	}
</style>
